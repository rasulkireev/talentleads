{% extends "base.html" %}
{% load static %}
{% load markdown_extras %}

{% block meta %}
    <title>HN Profile - {{ object.title }}</title>
    <meta name="description" content="{{ object.description }}"/>
    <link rel="canonical" href="https://{{ request.get_host }}/profile/{{ object.id }}" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:creator" content="@rasulkireev" />
    <meta name="twitter:title" content="HN Profile - {{ object.title }}" />
    <meta name="twitter:description" content="{{ object.description }}"/>
    <meta name="twitter:image" content="https://{{ request.get_host }}{% static 'vendors/images/logo.png' %}" />
    <meta property="og:title" content="HN Profile - {{ object.title }}" />
    <meta property="og:url" content="https://{{ request.get_host }}/profile/{{ object.id }}" />
    <meta property="og:description" content="{{ object.description }}"/>
    <meta property="og:image" content="https://{{ request.get_host }}{% static 'vendors/images/logo.png' %}" />
{% endblock meta %}

{% block content %}
<main class="flex-1">
  <div class="py-8 xl:py-10">
    <div class="max-w-3xl px-4 mx-auto sm:px-6 lg:px-8 xl:grid xl:max-w-5xl xl:grid-cols-3">
      <div class="xl:col-span-2 xl:border-r xl:border-gray-200 xl:pr-8">
        <div>
          <div>
            <div class="md:flex md:flex-col md:items-start md:justify-between lg:border-b lg:pb-2">
              <h1 class="text-2xl font-bold text-gray-900">{{ object.title }}</h1>
              {% if subscription.status == "active" and outreach_templates %}
                <div data-controller="email" class="flex mt-4">
                  <input data-email-target="profileId" class="hidden" value="{{ object.id }}" />
                  <select id="email_template" name="email_template" data-email-target="emailTemplate" class="block w-full rounded-l-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6">
                    {% for template in outreach_templates %}
                      <option value="{{ template.id }}">{{ template.title }}</option>
                    {% endfor %}
                  </select>
                  <a href="#" data-email-target="sendEmailLink" rel="nofollow" class="px-4 py-2 text-base font-semibold text-white bg-green-600 shadow-sm rounded-r-md hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600">
                    Email
                  </a>
                </div>
              {% elif subscription.status == "active" and not outreach_templates %}
                <a class="flex flex-row items-center px-4 py-2 mt-2 space-x-2 border-2 border-green-200 rounded-lg group bg-green-50 hover:border-green-400" href="{% url 'templates' %}">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                    <path fill-rule="evenodd" d="M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z" clip-rule="evenodd" />
                  </svg>
                  <span class="block text-sm font-medium text-gray-600">Please create a template to send an email</span>
                </a>
              {% elif user.is_authenticated and subscription.status != "active" %}
                <a class="flex flex-row items-center px-4 py-2 mt-2 space-x-2 border-2 border-gray-300 border-dashed rounded-lg group bg-gray-50 hover:border-gray-400" href="{% url 'pricing' %}">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                  </svg>
                  <span class="block text-sm font-medium text-gray-600">Subscribe to Send Email</span>
                </a>
              {% else %}
                <a class="flex flex-row items-center px-4 py-2 mt-2 space-x-2 border-2 border-gray-300 border-dashed rounded-lg group bg-gray-50 hover:border-gray-400" href="{% url 'pricing' %}">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                  </svg>
                  <span class="block text-sm font-medium text-gray-600">Login to Send Email</span>
                </a>
              {% endif %}
            </div>
            <div class="py-3 xl:pt-6 xl:pb-0">
              <h2 class="sr-only">Description</h2>
              <div class="space-y-2">
                {% for technology in object.technologies_used.all %}
                  <span class="inline-flex items-center rounded-full bg-blue-100 px-3 py-0.5 text-base font-medium text-blue-800">
                    {{ technology }}
                  </span>
                {% endfor %}
              </div>
              <div class="prose max-w-none">
                <p>{{ object.description | markdown | safe }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <aside class="block xl:pl-8">
        <h2 class="sr-only">Details</h2>
        <div class="space-y-2">

          {% if object.level %}
          <div class="flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941" />
            </svg>
            <span class="text-sm text-gray-700">
              Experience:
            </span>
            <span class="text-sm font-bold text-gray-700">
              {{ object.level }}
            </span>
          </div>
          {% endif %}

          {% if object.years_of_experience %}
          <div class="flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" />
            </svg>
            <span class="text-sm text-gray-700">
              Year of Experience:
            </span>
            <span class="text-sm font-bold text-gray-700">
              {{ object.years_of_experience }}
            </span>
          </div>
          {% endif %}

          {% if object.city %}
            <div class="flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z" />
              </svg>
              <span class="text-sm text-gray-700">
                City:
              </span>
              <span class="text-sm font-bold text-gray-700">
                {{ object.city }}
              </span>
            </div>
          {% endif %}

          {% if object.state %}
            <div class="flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM10.5 7.5v6m3-3h-6" />
              </svg>
              <span class="text-sm text-gray-700">
                State:
              </span>
              <span class="text-sm font-bold text-gray-700">
                {{ object.state }}
              </span>
            </div>
          {% endif %}

          {% if object.country %}
            <div class="flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z" />
              </svg>
              <span class="text-sm text-gray-700">
                Country:
              </span>
              <span class="text-sm font-bold text-gray-700">
                {{ object.country }}
              </span>
            </div>
          {% endif %}

          {% if object.location %}
            <div class="flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z" />
              </svg>
              <span class="text-sm text-gray-700">
                Location:
              </span>
              <span class="text-sm font-bold text-gray-700">
                {{ object.location }}
              </span>
            </div>
          {% endif %}

          {% if object.is_remote %}
          <div class="flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
            </svg>
            <span class="text-sm text-gray-700">
              Remote:
            </span>
            <span class="text-sm font-bold text-gray-700">
              {{ object.is_remote }}
            </span>
          </div>
          {% endif %}

          {% if object.willing_to_relocate %}
          <div class="flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
            </svg>
            <span class="text-sm text-gray-700">
              Willing to relocate:
            </span>
            <span class="text-sm font-bold text-gray-700">
              {{ object.willing_to_relocate }}
            </span>
          </div>
          {% endif %}

          {% if object.capacity %}
          <div>
            <div class="flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 10.5h.375c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125H21M4.5 10.5H18V15H4.5v-4.5zM3.75 18h15A2.25 2.25 0 0021 15.75v-6a2.25 2.25 0 00-2.25-2.25h-15A2.25 2.25 0 001.5 9.75v6A2.25 2.25 0 003.75 18z" />
              </svg>
              <span class="text-sm text-gray-700">
                Capacity:
              </span>
            </div>
            <ul role="list" class="mt-3 ml-6 space-y-3">
              {% for item in profile_capacity %}
              <li class="flex items-center space-x-2">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" />
                  </svg>
                  <span class="text-sm font-bold text-gray-700">
                    {{ item }}
                  </span>
                </li>
              {% endfor %}
            </ul>
          </div>
          {% endif %}

        </div>

        <div class="py-6 mt-6 space-y-2 border-t border-gray-200">

          {% if user.is_authenticated and subscription.status == "active" %}
            {% if object.name %}
              <div class="flex items-center space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5" />
                </svg>
                <span class="text-sm text-gray-700">
                  Name:
                </span>
                <span class="text-sm font-bold text-gray-700">
                  {{ object.name }}
                </span>
              </div>
            {% endif %}

            {% if object.email %}
              <div class="flex items-center space-x-2 prose">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                  <path stroke-linecap="round" d="M16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 10-2.636 6.364M16.5 12V8.25" />
                </svg>
                <span class="text-sm text-gray-700">
                  Email:
                </span>
                <a href="mailto://{{ object.email }}" class="text-sm font-bold text-gray-700">
                  {{ object.email }}
                </a>
              </div>
            {% endif %}

            <div>
              <div class="flex items-center space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244" />
                </svg>
                <span class="text-sm text-gray-700">
                  Links:
                </span>
              </div>
              <ul role="list" class="mt-3 ml-6 space-y-3 prose">
                    {% if object.resume_link %}
                    <li class="flex items-center space-x-1">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                      </svg>
                      <a href="{{ object.resume_link }}" class="text-sm font-bold text-gray-700">
                        Resume
                      </a>
                    </li>
                    {% endif %}
                    {% if object.personal_website %}
                    <li class="flex items-center space-x-1">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418" />
                      </svg>
                      <a href="{{ object.personal_website }}" class="text-sm font-bold text-gray-700">
                        Personal Website
                      </a>
                    </li>
                    {% endif %}
                    <li class="flex items-center space-x-1">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
                      </svg>
                      <a href="https://news.ycombinator.com/item?id={{ object.who_wants_to_be_hired_comment_id }}" class="text-sm font-bold text-gray-700">
                        Original Comment
                      </a>
                    </li>
                    <li class="flex items-center space-x-1">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                      </svg>
                      <a href="https://news.ycombinator.com/user?id={{ object.hn_username }}" class="text-sm font-bold text-gray-700">
                        HackerNews Profile
                      </a>
                    </li>
              </ul>
            </div>

          {% else %}
            <a class="block w-full px-10 py-6 text-center border-2 border-gray-300 border-dashed rounded-lg group bg-gray-50 hover:border-gray-400" href="{% url 'pricing' %}">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 mx-auto text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
              </svg>
              <span class="block mt-2 text-sm font-medium text-gray-600">Private information</span>
              <span class="block mt-2 text-sm text-gray-500">Information that is only visible with a business subscription.</span>
            </a>
          {% endif %}
        </div>

      </aside>
    </div>
  </div>
</main>
{% endblock content %}

{% block schema %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "HN Profile - {{ object.title }}",
    "description": "{{ object.description }}",
    "url": "https://{{ request.get_host }}/profile/{{ object.id }}"
  }
  </script>
{% endblock schema %}
