{% extends "base.html" %}

{% load markdown_extras static %}

{% block meta %}
<title>{{ post.title }} - TalentLeads Blog</title>
<meta name="description" content="{{ post.description|default:post.title }}"/>
<link rel="canonical" href="https://{{ request.get_host }}{{ post.get_absolute_url }}" />
<meta property="og:type" content="article" />
<meta property="og:title" content="{{ post.title }}" />
<meta property="og:url" content="https://{{ request.get_host }}{{ post.get_absolute_url }}" />
<meta property="og:description" content="{{ post.description|default:post.title }}"/>
{% if post.image %}
<meta property="og:image" content="https://{{ request.get_host }}{{ post.image.url }}" />
{% else %}
<meta property="og:image" content="https://{{ request.get_host }}{% static 'vendors/images/logo-2.png' %}" />
{% endif %}
<meta property="article:published_time" content="{{ post.created|date:'c' }}" />
<meta property="article:modified_time" content="{{ post.modified|date:'c' }}" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ post.title }}" />
<meta name="twitter:description" content="{{ post.description|default:post.title }}"/>
{% if post.image %}
<meta name="twitter:image" content="https://{{ request.get_host }}{{ post.image.url }}" />
{% else %}
<meta name="twitter:image" content="https://{{ request.get_host }}{% static 'vendors/images/logo-2.png' %}" />
{% endif %}
{% endblock meta %}

{% block content %}

<div class="mx-auto max-w-4xl">
  <!-- Back to Blog Link -->
  <div class="px-6 pt-8 lg:px-8">
    <a href="{% url 'blog_posts' %}" class="inline-flex items-center text-sm font-medium text-gray-600 transition-colors hover:text-blue-600">
      <svg class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
      Back to Blog
    </a>
  </div>

  <!-- Article Header -->
  <article class="px-6 pt-10 pb-16 lg:px-8">
    <header class="mb-10">
      <!-- Tags -->
      {% if post.tags %}
      <div class="flex flex-wrap gap-2 mb-6">
        {% for tag in post.tags.split %}
        <span class="inline-flex items-center px-3 py-1 text-sm font-medium text-blue-700 bg-blue-50 rounded-full">
          {{ tag }}
        </span>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Title -->
      <h1 class="mb-6 text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl lg:text-6xl">
        {{ post.title }}
      </h1>

      <!-- Description -->
      {% if post.description %}
      <p class="mb-6 text-xl leading-relaxed text-gray-600">
        {{ post.description }}
      </p>
      {% endif %}

      <!-- Meta Info -->
      <div class="flex flex-wrap gap-4 items-center pb-6 text-sm text-gray-600 border-b border-gray-200">
        <time datetime="{{ post.created|date:'Y-m-d' }}" class="flex items-center">
          <svg class="mr-2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
          </svg>
          {{ post.created|date:"F d, Y" }}
        </time>
        {% if post.modified != post.created %}
        <span class="flex items-center">
          <svg class="mr-2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
          Updated {{ post.modified|date:"F d, Y" }}
        </span>
        {% endif %}
      </div>
    </header>

    <!-- Featured Image -->
    {% if post.image %}
    <div class="overflow-hidden mb-10 rounded-2xl">
      <img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-full h-auto"/>
    </div>
    {% endif %}

    <!-- Article Content -->
    <div class="max-w-none prose prose-lg prose-blue prose-headings:font-bold prose-headings:tracking-tight prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline prose-img:rounded-lg prose-pre:bg-gray-900 prose-pre:text-gray-100">
      {{ post.content|markdown }}
    </div>

    <!-- Share Section -->
    <div class="pt-10 mt-12 border-t border-gray-200">
      <h3 class="mb-4 text-lg font-semibold text-gray-900">Share this article</h3>
      <div class="flex gap-3">
        <a href="https://twitter.com/intent/tweet?text={{ post.title|urlencode }}&url=https://{{ request.get_host }}{{ post.get_absolute_url }}"
           target="_blank"
           rel="noopener noreferrer"
           class="inline-flex justify-center items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white rounded-lg border border-gray-300 transition-colors hover:bg-gray-50">
          <svg class="mr-2 w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
          </svg>
          Twitter
        </a>
        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://{{ request.get_host }}{{ post.get_absolute_url }}"
           target="_blank"
           rel="noopener noreferrer"
           class="inline-flex justify-center items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white rounded-lg border border-gray-300 transition-colors hover:bg-gray-50">
          <svg class="mr-2 w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
          </svg>
          LinkedIn
        </a>
      </div>
    </div>
  </article>

  <!-- Related Posts or CTA -->
  <div class="px-6 pb-16 mx-auto lg:px-8">
    <div class="px-8 py-12 text-center bg-gradient-to-r from-blue-600 to-blue-700 rounded-3xl shadow-xl">
      <h2 class="text-2xl font-bold tracking-tight text-white sm:text-3xl">
        Ready to find your next great hire?
      </h2>
      <p class="mx-auto mt-4 max-w-2xl text-base leading-7 text-blue-100">
        Start searching through qualified candidates today with TalentLeads.
      </p>
      <div class="flex gap-x-4 justify-center items-center mt-8">
        {% if user.is_authenticated %}
          <a href="{% url 'profiles' %}" class="px-6 py-3 text-base font-semibold text-blue-600 bg-white rounded-lg shadow-sm transition-colors hover:bg-blue-50">
            Start Searching
          </a>
        {% else %}
          <a href="{% url 'account_signup' %}" class="px-6 py-3 text-base font-semibold text-blue-600 bg-white rounded-lg shadow-sm transition-colors hover:bg-blue-50">
            Get Started Free
          </a>
        {% endif %}
        <a href="{% url 'blog_posts' %}" class="text-base font-semibold leading-7 text-white transition-colors hover:text-blue-100">
          Read More Articles <span aria-hidden="true">â†’</span>
        </a>
      </div>
    </div>
  </div>
</div>

{% endblock content %}

{% block schema %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ post.title }}",
  "description": "{{ post.description|default:post.title }}",
  {% if post.image %}
  "image": "https://{{ request.get_host }}{{ post.image.url }}",
  {% endif %}
  "datePublished": "{{ post.created|date:'c' }}",
  "dateModified": "{{ post.modified|date:'c' }}",
  "author": {
    "@type": "Organization",
    "name": "TalentLeads",
    "url": "https://{{ request.get_host }}/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "TalentLeads",
    "logo": {
      "@type": "ImageObject",
      "url": "https://{{ request.get_host }}{% static 'vendors/images/logo-2.png' %}"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://{{ request.get_host }}{{ post.get_absolute_url }}"
  }
}
</script>
{% endblock schema %}
